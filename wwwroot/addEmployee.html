<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Add employee for company</title>
		<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" type="text/css" href="./css/bootstrap/dist/css/bootstrap.css">
		<script type="application/javascript" src="./js/jquery-3.5.1.min.js"></script>
		<script type="application/javascript" src="./js/jquery.params.js"></script>
		<script type="text/javascript">
			window.onload = function() {
				getGenderList()
			}

			function getGenderList() {
				$.ajax({
					type: 'get', //设置请求类型
					url: '/api/genderList', //请求后台的url地址
					data: '', //请求参数，是key-value形式的，如 {name:"jason"}
					success: function(data) { //请求成功后的回调函数，data为后台返回的值
						console.log(data);
						var str = "";
						for (var i = 0; i < data.length; i++) {
							console.log(data[i]);
							str += "<option value =\"" + data[i] + "\">" + data[i] + "</option>"
						}
						document.getElementById("GenderSelect").innerHTML += str;
					}
				});
			}

			function goBack() {
				window.location.href = "/employees.html?companyId=" + $.query.get("companyId");
			}

			function send() {
				var data = "{";
				data += "\"employeeNo\":" + "\"" + form.EmployeeNo.value + "\",";
				data += "\"firstName\":" + "\"" + form.FirstName.value + "\",";
				data += "\"lastName\":" + "\"" + form.LastName.value + "\",";
				data += "\"gender\":" + "\"" + form.GenderSelect.value + "\",";
				data += "\"dateOfBirth\":" + "\"" + form.DateTime.value + "\"";
				data += "}"
				alert(data);
				$.ajax({
					type: "POST",
					url: "api/companies/"+$.query.get("companyId")+"/employees/",
					contentType: "application/json;charset=utf-8",
					data: data,
					dataType: "json",
					success: function(message) {
						alert("提交成功" + JSON.stringify(message));
						goBack();
					},
					error: function(message) {
						alert("提交失败" + JSON.stringify(message));
					}
				});
			}
		</script>
	</head>
	<body>
		<div class="container">
			<div class=" row">
				<div class="col-md-2">
					<img alt="Logo" src="/images/1.png" style="height:60px;width:60px">
				</div>
				<div class="col-md-10">
					<span class=" h2">Add Employee</span>
				</div>
			</div>
			<form id="form">
				<div class="row form-group offset-md-2">
					<div class="col-md-6">
						<label for="EmployeeNo">EmployeeNo</label>
					</div>
					<div class="col-md-6">
						<input class="form-control" type="text" id="EmployeeNo" name="EmployeeNo" value="" />
					</div>
				</div>
				<div class="row form-group offset-md-2">
					<div class="col-md-6">
						<label for="FirstName">FirstName</label>
					</div>
					<div class="col-md-6">
						<input class="form-control" type="text" id="FirstName" name="FirstName" value="" />
					</div>
				</div>

				<div class="row form-group offset-md-2">
					<div class="col-md-6">
						<label for="LastName">LastName</label>
					</div>
					<div class="col-md-6">
						<input class="form-control" type="text" id="LastName" name="LastName" value="" />
					</div>
				</div>

				<div class="row form-group offset-md-2">
					<div class="col-md-6">
						<label for="Gender">Gender</label>
					</div>
					<div class="col-md-6">
						<select class="custom-select" id="GenderSelect"></select>
					</div>
				</div>

				<div class="row form-group offset-md-2">
					<div class="col-md-6">
						<label for="DateTime">DateOfBirth</label>
					</div>
					<div class="col-md-6">
						<input class="form-control" type="date" id="DateTime" name="DateTime" value="" />
					</div>
				</div>

			</form>
			<div>
				<div class="col-md-2 offset-md-2">
					<button class="btn btn-primary" onclick=javascript:send() style="width: 70px;">Add</button>
					<button class="btn btn-primary" onclick=javascrtpt:goBack() style="width: 70px;">Return</button>
				</div>
			</div>
		</div>
	</body>
</html>
